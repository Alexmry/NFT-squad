<!------------------Banner-------------------------->
<div class="banner mt-5" style="background-color: #c4c4c4;" >
    <div class="d-flex justify-content-begin">
        <div class="p-3">
            <h1 class="text-center">Find & Showcase</h1>
            <h3 class="text-center">The hottest NFTs</h3>
        </div>
    </div>
</div>

<!------ Searching for a friend --------------->
<div class="container mt-4 d-flex align-items-center w-100">
    <div class="search-friend" style="width: 500px;">
        <%= form_for root_path, method: :get do %>
            <div class="row">
                <div class="col-8">
                    <%= text_field_tag :name,
                    params[:name],
                    class: "form-control",
                    placeholder: "Find a friend" 
                    %>
                </div>
                <div class="col-4">
                    <%= submit_tag "Search", class: 'btn btn-primary' %>
                </div>
            </div>
        <% end %>
        <div id="names_search">
            <% if !@users.nil? && @users != []%>
                <% if @users.length > 1 %>
                    <ul class="list-group">
                        <% @users.each do |user| %>
                            <div class="d-flex justify-content-between mt-2">
                                <div class="infos-user">
                                    <p style="margin-bottom: 0px"><%= user.first_name %> <%= user.last_name %></p>
                                </div>
                                <div class="link-user-page">
                                    <%= link_to "Profile", user_path(user), class: "link-friend-page" %>
                                </div>
                            </div>
                        <% end %>
                    </ul>
                <% else %>
                    <li class="list-group-item mt-2">
                        <div class="d-flex justify-content-between">
                            <div class="infos-user">
                                <p style="margin-bottom: 0px"><%= @users.first.first_name %> <%= @users.first.last_name %></p>
                            </div>
                            <div class="link-user-page">
                                <%= link_to "Profile", user_path(@users.first), class: "link-friend-page" %>
                            </div>
                        </div>
                    </li>
                <% end %>
            <% end %>
        </div>
        <!------------------------- Category search ---------------------------------->
    </div>
    <select class="select2-category" name="categories_nft">
        <% @categories_nft.each do |category| %>
            <option value="<%= category[0...2].upcase%>"><%= category.capitalize %></option>
        <% end %>
    </select>
</div>
<!--------------------------------END Searching for a friend------------------------->

<!-------Main container--------------->
<div class="main-container">
  <div class="card-left">
    <div class="social-media-card">
      <div class="social-media-links d-flex align-items-center my-2">
        <i class="far fa-heart mr-5"></i>
        <%= link_to "Creations", "#" %>
      </div>
      <div class="social-media-links d-flex align-items-center my-2">
        <i class="far fa-heart mr-5"></i>
        <%= link_to "Liked", "#" %>
      </div>
       <%= link_to "New NFT", new_nft_path, class:"btn new-nft-btn mt-4", id:"new-btn"  %>
        <hr>
    </div>
  </div>

  <div class="card-center">
    <% @nfts.each do |nft| %>
        <div class="d-flex justify-content-center">
            <div class="card-main mt-5">
                <% user = User.find(nft.user_id) %>
                <% if nft.image_url %>
                    <div class="title-card d-flex align-items-center p-2">
                        <%= image_tag "https://kitt.lewagon.com/placeholder/users/cveneziani", class: "avatar-large", alt: "avatar" %>
                        <div class="title-card-block px-3">
                            <%= link_to "#{user.first_name} #{user.last_name}", user_path(user)%>
                            <p><%= user.bio %></p>
                            <% timeUTC = Time.now.utc - nft.created_at  %>
                            <% time = (timeUTC / 60).to_i %>
                            <% if time < 119 %>
                                <p style="margin-bottom: 0px;"> <%= time %> min</p>
                            <% else %>
                                <% time = (time / 60).to_i %>
                                <p style="margin-bottom: 0px;"> <%= time %> hours</p>
                            <% end %>
                            
                        </div>
                    </div>
                <% end %>
                <hr>
                <%= link_to nft_path(nft), class:'text-decoration-none' do %>
                    <p class="p-2">Created <%= nft.name %></p>
                    <%= image_tag nft.image_url, height: 400, width: 500, crop: :fill %>
                <% end %>
                <div class="d-flex my-2 p-2"> 
                    <i class="far fa-heart px-2" style="color:#E94A47;"></i>
                    <i class="far fa-comment" style="color:#E94A47;"></i>
                </div>
            </div>
        </div>
    <% end %>
 </div>


<div class="card-right">
    <div class="card-suggestion">
        <div class="card-title">
            <h4>Suggested for you</h4>
        </div>
        <hr>
        <% @user_suggestions.each do |user| %>
            <div class="card-horizontal mb-5">
                <div class="card-follow d-flex justify-content-around align-items-center">
                    <%= image_tag "https://kitt.lewagon.com/placeholder/users/cveneziani", class: "avatar-large", alt: "avatar" %>
                    <h5 style="font-weight: 500; color:#3A77BB;"><%= user.first_name %></h5>
                    <%= link_to "Follow", user_path(user), class:"follow-button" %>
                </div>
                <div class="card-nfts d-flex justify-content-around mt-1">
                    <% if user.nfts %>
                        <% user.nfts[0..2].each do |nft| %>
                            <%= image_tag nft.image_url, class: "avatar-square", alt: "avatar" %>
                        <% end %>
                    <% end %>
                </div>
            </div>
            <hr>
        <% end %>
    </div>
</div>
<!------------End Main Container------------------->


